<!-- navbar.html (HTMX partial) -->
<header id="mainNavbar" class="fixed top-0 left-0 w-full z-50 bg-transparent text-white transition-all duration-500 ease-in-out">
  <div class=" mx-auto px-4 py-4 flex items-center justify-between">
    <!-- Logo -->
    <div class="flex-shrink-0">
      <a href="/index.html">
        <img id="navbar-logo" src="../assets/images/logo/al_maaref_logo_1024.png" alt="School Logo" class="h-32 w-auto object-contain transition duration-300">
      </a>
    </div>

    <nav id="desktop-nav" x-data="{ openMenu: null, hoverTimeout: null }" class="hidden md:flex flex justify-center w-full text-lg font-semibold relative">
      <div class="flex items-center gap-12 max-w-7xl w-full">

    <div class="relative group"
      @mouseenter="clearTimeout(hoverTimeout); openMenu = 'about'"
      @mouseleave="hoverTimeout = setTimeout(() => openMenu = null, 300)"
    >
      <button class="hover:underline underline-offset-4" aria-haspopup="true" aria-expanded="openMenu === 'about'">About Us</button>
      <div
        x-show="openMenu === 'about'"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95 max-h-0"
        x-transition:enter-end="opacity-100 scale-100 max-h-[500px]"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100 max-h-[500px]"
        x-transition:leave-end="opacity-0 scale-95 max-h-0"
        class="absolute top-full mt-2 bg-white text-black rounded shadow-xl w-[700px] p-6 z-50 overflow-hidden"
        :class="($el.getBoundingClientRect().left + 700 > window.innerWidth) ? 'right-0' : 'left-0'"
        role="menu"
        aria-label="About Us submenu"
      >
        <div class="grid grid-cols-3 gap-6">
          <div>
            <h4 class="font-bold mb-2 text-xl">Leadership</h4>
            <ul class="space-y-1 text-lg">
              <li><a href="/guiding_statement.html">Guiding Statement</a></li>
              <li><a href="/CEO_welcome_message.html">Director's Message</a></li>
              <li><a href="/Principals_welcome_message.html">Principal's Message</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-2 text-xl">Team & Governance</h4>
            <ul class="space-y-1 text-lg">
              <li><a href="/our_team.html">Our Team</a></li>
              <li><a href="/mas_governors.html">Advisory Board</a></li>
            </ul>
          </div>
          <div>
            <h4 class="font-bold mb-2 text-xl">Why MAS?</h4>
            <ul class="space-y-1 text-lg">
              <li><a href="/history.html">Our History</a></li>
              <li><a href="/affiliations.html">Accreditations & Affiliations</a></li>
              <li><a href="/students_testimonials.html">Testimonials</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <template x-for="item in [
      { id: 'admission', label: 'Admission', img: 'admission.jpg', links: [
        ['Admission Process', '/admissions_process.html'],
        ['School Fees', '/school_fees.html'],
        ['KHDA Fact Sheet', '/school_fees.html#KHDA'],
        ['Apply Now', '/admissions_enquiry.html']
      ]},
      { id: 'learning', label: 'Learning', img: 'learning.jpg', links: [
        ['Curriculum Overview', '/curriculum.html'],
        ['Assessment & Equalization', '/assessment.html']
      ]},
      { id: 'life', label: 'Student Life', img: 'life.jpg', links: [
        ['Student Support', '/students_life.html'],
        ['Student Council', '/students_council.html'],
        ['Events & Activities', '/MAS_activities.html']
      ]},
      { id: 'parents', label: 'Parent Essentials', img: 'parents.jpg', links: [
        ['Calendar', '/calendar.html'],
        ['Parents Handbook', '/parents.html'],
        ['Policies', '/school_policies.html'],
        ['Newsletter', '/newsletters.html'],
        ['School Timings', '/school_timings.html']
      ]},
      { id: 'contact', label: 'Contact Us', img: 'contact.jpg', links: [
        ['Campus Map', '/contact.html'],
        ['Reach Us', '/reach.html'],
        ['Careers', '/careers.html']
      ]}
    ]" :key="item.id">
      <div class="relative group"
        @mouseenter="clearTimeout(hoverTimeout); openMenu = item.id"
        @mouseleave="hoverTimeout = setTimeout(() => openMenu = null, 300)"
      >
        <button class="hover:underline underline-offset-4" x-text="item.label" :aria-expanded="openMenu === item.id" aria-haspopup="true"></button>
        <div
          x-show="openMenu === item.id"
          x-transition:enter="transition ease-out duration-300"
          x-transition:enter-start="opacity-0 scale-95 max-h-0"
          x-transition:enter-end="opacity-100 scale-100 max-h-[500px]"
          x-transition:leave="transition ease-in duration-200"
          x-transition:leave-start="opacity-100 scale-100 max-h-[500px]"
          x-transition:leave-end="opacity-0 scale-95 max-h-0"
          class="absolute top-full mt-2 bg-white text-black rounded shadow-xl w-[700px] p-6 z-50 overflow-hidden"
          :class="($el.getBoundingClientRect().left + 700 > window.innerWidth) ? 'right-0' : 'left-0'"
          role="menu"
          :aria-label="item.label + ' submenu'"
        >
          <div class="grid grid-cols-3 gap-6">
            <div class="col-span-2">
              <ul class="space-y-1 text-lg">
                <template x-for="([text, link]) in item.links" :key="text">
                  <li><a :href="link" x-text="text"></a></li>
                </template>
              </ul>
            </div>
            <div class="hidden lg:block">
              <img :src="'/assets/images/mega/' + item.img" :alt="item.label" class="rounded-lg h-32 w-full object-cover" />
            </div>
          </div>
        </div>
      </div>
    </template>

    <a href="/blog.html" class="hover:underline underline-offset-4">Blog</a>
    <a href="/articles.html" class="hover:underline underline-offset-4">Articles</a>
      </div>
    </nav>

    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>


    

  </div>
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

</header>

<script>
  document.addEventListener("scroll", () => {
    const navbar = document.getElementById("mainNavbar");
    const logo = document.getElementById("navbar-logo");

    if (window.scrollY > 10) {
      navbar.classList.remove("bg-transparent");
      navbar.classList.add("bg-[rgba(0,0,0)]", "shadow-md");
      logo.src = "../assets/images/logo/al_maaref_logo_1024.png";
    } else {
      navbar.classList.remove("bg-[rgba(0,0,0)]", "shadow-md");
      navbar.classList.add("bg-transparent");
      logo.src = "../assets/images/logo/al_maaref_logo_1024.png";
    }
  });

  // Mobile menu toggle
  document.getElementById("mobileMenuToggle").addEventListener("click", () => {
    const menu = document.getElementById("mobile-menu");
    menu.classList.toggle("hidden");
  });
</script>

