<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reach Us | Al Maaref American School</title>

  
  <link rel="stylesheet" href="assets/styles.css">
  <link rel="icon" type="image/x-icon" href="assets/images/logo/favicon_io/favicon.ico">
  <!-- Apple devices -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/images/logo/favicon_io/apple-touch-icon.png">
  <!-- Modern browsers -->
  <link rel="icon" sizes="32x32" href="assets/images/logo/favicon_io/favicon-32x32.png" type="image/png">
  <link rel="icon" sizes="192x192" href="assets/images/logo/favicon_io/android-chrome-192x192.png" type="image/png">
  
  <script src="https://unpkg.com/htmx.org@1.9.6"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="assets/script.js"></script>
</head>
<body class="bg-white font-[Playfair_Display]">
  
  <div hx-get="partials/navbarv1.html" hx-trigger="load" hx-swap="outerHTML"></div>
  <div hx-get="partials/mobilemenu.html" hx-trigger="load" hx-swap="outerHTML"></div>

  <!-- Hero Section -->
  <section class="relative h-[70vh] -mt-[160px] bg-cover bg-center flex items-center justify-center pt-40" style="background-image: url('assets/images/contact_us_title_image.webp');">
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>
    <div class="relative z-10 flex items-center justify-center h-full text-white">
      <h1 class="text-4xl md:text-5xl font-bold">Get in touch with us</h1>
    </div>
  </section>

<section class="bg-white text-[#333] py-16">
  <div class="max-w-4xl mx-auto px-6">
    <h2 class="text-3xl font-bold mb-4 text-[#6089FB]">Reach Us</h2>
    <p class="mb-8 text-2xl text-gray-700">
      Want to know more about our school, curriculum, or admissions process? 
      We’re here to help. Get in touch with us by submitting the form below and our team will get back to you as soon as possible.
    </p>

<form id="contactForm"
      name="reach-us"
      method="POST"
      data-netlify="true"
      data-netlify-honeypot="bot-field"
      class="space-y-6">

  <!-- Netlify detection + honeypot -->
  <input type="hidden" name="form-name" value="reach-us" />
  <p class="hidden"><label>Don’t fill this out: <input name="bot-field" /></label></p>

  <!-- Name & Email -->
  <div class="grid md:grid-cols-2 gap-6">
    <div>
      <label class="block mb-1 font-medium" for="c-name">Full Name</label>
      <input id="c-name" type="text" name="name" autocomplete="name"
        class="w-full border border-gray-300 px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#6089FB]"
        placeholder="Your Name" />
    </div>
    <div>
      <label class="block mb-1 font-medium" for="c-email">Email</label>
      <input id="c-email" type="email" name="email" autocomplete="email"
        class="w-full border border-gray-300 px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#6089FB]"
        placeholder="your@email.com" />
      <small id="c-email-hint" class="text-gray-500"></small>
    </div>
  </div>

  <!-- Subject -->
  <div>
    <label class="block mb-1 font-medium" for="c-subject">Subject</label>
    <input id="c-subject" type="text" name="subject"
      class="w-full border border-gray-300 px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#6089FB]"
      placeholder="Message subject" />
  </div>

  <!-- Message -->
  <div>
    <label class="block mb-1 font-medium" for="c-message">Message</label>
    <textarea id="c-message" name="message" rows="6"
              class="w-full border border-gray-300 px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-[#6089FB]"
              placeholder="Write your message..."></textarea>
    <div class="flex justify-between">
      <small class="text-gray-500">Tip: include phone & preferred time if you want a call back.</small>
      <small id="c-count" class="text-gray-500">0 words</small>
    </div>
  </div>

  <!-- Inline status -->
  <div id="contactMsg" class="hidden rounded-lg border px-4 py-3" aria-live="polite"></div>

  <!-- Submit -->
  <div>
    <button id="contactBtn" type="submit"
            class="bg-[#6089FB] text-white font-semibold px-6 py-3 rounded hover:bg-[#4a6ed6] transition">
      Send Message
    </button>
    <small id="contactHint" class="ml-3 text-gray-500"></small>
  </div>
</form>

<script>
(() => {
  const form  = document.getElementById('contactForm');
  const btn   = document.getElementById('contactBtn');
  const hint  = document.getElementById('contactHint');
  const msgEl = document.getElementById('contactMsg');

  const emailEl = document.getElementById('c-email');
  const emailHint = document.getElementById('c-email-hint');
  const messageEl = document.getElementById('c-message');
  const countEl = document.getElementById('c-count');

  let armed=false, timer=null;

  const emailRx = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/i;
  const typos = { 'gamil.com':'gmail.com','gmial.com':'gmail.com','hotnail.com':'hotmail.com','outlok.com':'outlook.com' };

  const warn = (items, tone='yellow') => {
    const styles = {
      yellow:'bg-yellow-50 border-yellow-200 text-yellow-800',
      red:'bg-red-50 border-red-200 text-red-800',
      green:'bg-green-50 border-green-200 text-green-800'
    }[tone];
    msgEl.className = `rounded-lg border px-4 py-3 ${styles}`;
    msgEl.innerHTML = `<ul class="list-disc pl-5 space-y-1">${items.map(i=>`<li>${i}</li>`).join('')}</ul>`;
    msgEl.classList.remove('hidden');
  };

  // word counter
  const updateCount = () => {
    const n = messageEl.value.trim().split(/\s+/).filter(Boolean).length;
    countEl.textContent = `${n} ${n===1?'word':'words'}`;
  };
  messageEl.addEventListener('input', updateCount); updateCount();

  // email nudge (typo hints)
  emailEl.addEventListener('blur', () => {
    const v = emailEl.value.trim();
    const dom = v.split('@')[1]?.toLowerCase();
    emailHint.textContent = typos[dom] ? `Did you mean ${v.split('@')[0]}@${typos[dom]} ?` : '';
  });

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // soft checks (never block—first click shows advice)
    const notes = [];
    const email = emailEl.value.trim();
    if (!email || !emailRx.test(email)) notes.push('Email format looks unusual.');
    if (!messageEl.value.trim()) notes.push('Message is empty.');
    if (messageEl.value.trim().length < 20) notes.push('Consider adding a bit more detail (helps us route faster).');

    if (notes.length && !armed) {
      warn(notes,'yellow');
      hint.textContent = 'Review the notes above. Click “Send anyway” to proceed.';
      btn.textContent = 'Send anyway';
      armed = true;
      clearTimeout(timer);
      timer = setTimeout(()=>{ armed=false; btn.textContent='Send Message'; hint.textContent=''; }, 12000);
      return;
    }

    // submit to Netlify
    msgEl.className = "rounded-lg border px-4 py-3 bg-yellow-50 border-yellow-200 text-yellow-800";
    msgEl.textContent = "Sending…";
    msgEl.classList.remove('hidden');

    try {
      const res = await fetch("/", { method:"POST", body: new FormData(form) });
      if (!res.ok) throw new Error();
      form.reset(); updateCount();
      armed=false; btn.textContent='Send Message'; hint.textContent='';
      warn(['Thanks! Your message has been sent. Our team will get back to you soon.'],'green');
    } catch {
      warn(['Sorry—something went wrong. Please try again later or email us at info@mas-edu.ae.'],'red');
    }
  });
})();
</script>

  </div>
</section>

  <!-- Footer (PARTIAL) -->
  <div hx-get="partials/footer.html" hx-trigger="load" hx-swap="outerHTML"></div>
</body>
</html>
